<%- include("partials/head", { title: "Book Notes" }) %>
<%- include("partials/header", { sort }) %>

    <main class="container page">

        <section class="page-top">
            <h1 class="page-title">My Books</h1>
            <p class="page-subtitle">Sorting: <strong><%= sort %></strong></p>
        </section>

        <section class="grid">
            <% books.forEach((book) => { %>
                <article class="card">

                    <div class="card-cover">
                        <img 
                            src="<%= book.cover_id 
                            ? `https://covers.openlibrary.org/b/id/${book.cover_id}-M.jpg`
                            : '/images/image.png' %>" 
                            alt="Cover">  
                    </div>

                    <div class="card-body">
                        <div class="card-top">
                            <h2><%= book.title %></h2>
                            <p><%= book.author %></p>
                        </div>

                        <div class="meta">
                            <span class="pill">
                                ‚≠ê <%= book.rating %> / 10
                            </span>
                        </div>

                        <p class="notes"><%= book.notes %></p>
                        
                        <div class="actions">
                            <a class="btn ghost" href="/edit/<%= book.id %>">Edit</a>

                            <form action="/delete/<%= book.id %>" method="POST">
                                <button class="btn danger" onclick="return confirm('Are you sure you want to delete this book?')">Delete</button>
                            </form>

                        </div>
                    </div>
                </article>
            <% }) %>
        </section>
    </main>

<%- include("partials/footer") %>